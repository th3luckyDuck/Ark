<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Ark — Browser edition (tunnel + block remake)</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <style>
      html, body { margin:0; padding:0; background:#000; }
      canvas { outline: none; }
    </style>

    <script>
      /* ===== Shortcuts ===== */
      const q = s => document.querySelector(s);
      const qa = s => Array.from(document.querySelectorAll(s));
      const emit = (type, ids) => ids.forEach(id => q(id)?.emit(type, null, false));
      const play = id => { const e = q(id); if (e?.components?.sound) e.components.sound.playSound(); };
      const pause = id => { const e = q(id); if (e?.components?.sound) e.components.sound.pauseSound(); };
      const setText = (id, v) => q(id)?.setAttribute('text', `value: ${v}; color: #6FF3E8; width: 6; align: left`);
      const bindClick = (sel, cb) => { const el = q(sel); if (!el) return; el.classList.add('ui'); el.addEventListener('click', cb); };

      /* ===== Cursor whitelist ===== */
      AFRAME.registerComponent('cursor-whitelist', {
        init() {
          this.el.setAttribute('cursor', 'rayOrigin: mouse; fuse: false');
          this.el.setAttribute('raycaster', 'objects: .ui');
        }
      });

      /* ===== HUD anchor ===== */
      AFRAME.registerComponent('hud-anchor', {
        schema: { offset: {type:'vec3', default: {x:0, y:-0.52, z:-1.05}}, tilt: {type:'number', default:-8} },
        tick() {
          const {x,y,z} = this.data.offset;
          const o3 = this.el.object3D;
          o3.position.set(x,y,z);
          o3.rotation.set(THREE.MathUtils.degToRad(this.data.tilt),0,0);
        }
      });

      /* ===== Runner physics (lanes along Z; tunnel extends along X) ===== */
      AFRAME.registerComponent('runner-physics', {
        schema: { gravity:{default:-9.8}, jumpVelocity:{default:6}, groundY:{default:0} },
        init() {
          this.velY = 0; this.grounded = true;
          this.targetLane = 1; // 0:-3, 1:0, 2:+3 on Z
          this.lanes = [-3,0,3];
          this.size = new THREE.Vector3(0.8,1.6,0.8);
          this.playerBox = new THREE.Box3();
          this.refreshObstacles = () => { this.obstacles = qa('.obstacle'); };
          window.addEventListener('keydown', e => {
            const k = e.key;
            if (k==='ArrowLeft' || k==='a' || k==='A') this.targetLane = Math.max(0, this.targetLane-1);
            if (k==='ArrowRight' || k==='d' || k==='D') this.targetLane = Math.min(2, this.targetLane+1);
            if (k===' ' || k==='Spacebar') this.jump();
          });
        },
        jump(){ if(this.grounded){ this.velY=this.data.jumpVelocity; this.grounded=false; emit('jump',['#jumpb']); } },
        tick(t,dt){
          const d=dt/1000; if(!d) return;
          const pos=this.el.object3D.position;
          // lane snap (on Z)
          const tz=this.lanes[this.targetLane];
          pos.z += (tz - pos.z) * Math.min(1, d*12);
          // gravity
          this.velY += this.data.gravity*d;
          pos.y += this.velY*d;
          const gy=this.data.groundY + this.size.y/2;
          if(pos.y<=gy){ pos.y=gy; this.velY=0; this.grounded=true; }
          // player box
          const half = new THREE.Vector3(this.size.x/2, this.size.y/2, this.size.z/2);
          const min = new THREE.Vector3().copy(pos).sub(half);
          const max = new THREE.Vector3().copy(pos).add(half);
          this.playerBox.min.copy(min); this.playerBox.max.copy(max);
          // collisions
          for(const el of this.obstacles){
            const o=el.object3D;
            const wp=new THREE.Vector3(); o.getWorldPosition(wp);
            const sc=new THREE.Vector3(); o.getWorldScale(sc);
            const geo=el.getAttribute('geometry')||{};
            const sx=geo.width||sc.x, sy=geo.height||sc.y, sz=geo.depth||sc.z;
            const hb=new THREE.Vector3(sx/2,sy/2,sz/2);
            const bmin=new THREE.Vector3().copy(wp).sub(hb);
            const bmax=new THREE.Vector3().copy(wp).add(hb);
            const box=new THREE.Box3(bmin,bmax);
            if(this.playerBox.intersectsBox(box)){
              q('#resetb')?.dispatchEvent(new Event('click'));
              emit('gameend',['#gameovert']);
              break;
            }
          }
        }
      });

      /* ===== Global game state ===== */
      let timers = [];
      let gameStarted = false;
      let scoring = false;
      let score = 0;
      let lastscore=0,lastscore2=0,lastscore3=0,lastscore4=0,lastscore5=0;
      let boss = false;

      function clearTimers(){ timers.forEach(t=>clearTimeout(t)); timers=[]; }
      function clearObstacles(){ qa('.obstacle').forEach(e=>e.parentNode.removeChild(e)); q('#player')?.components?.['runner-physics']?.refreshObstacles(); }

      /* ===== Tunnel builder (open line-of-sight down entire run) ===== */
      function buildTunnel(){
        const scene=q('a-scene');
        const tunnel=q('#tunnel')||document.createElement('a-entity');
        tunnel.setAttribute('id','tunnel');
        tunnel.setAttribute('position','0 0 0');
        // Long corridor: floor, left, right, ceiling — all double-sided
        const makePanel=(pos,rot,scale,color)=>{
          const e=document.createElement('a-box');
          e.setAttribute('position',pos);
          e.setAttribute('rotation',rot);
          e.setAttribute('scale',scale);
          e.setAttribute('material',`color: ${color}; side: double`);
          return e;
        };
        // Corridor along X: player at x=0, extends to x=200 then beyond
        const floor = makePanel('100 0 0','-90 0 0','200 10 10','#1f4959');
        const left  = makePanel('100 15 -10','0 0 0','200 30 1','#1f4959');
        const right = makePanel('100 15 10','0 0 0','200 30 1','#1f4959');
        const ceil  = makePanel('100 30 0','90 0 0','200 10 10','#1f4959');
        // gentle UV scroll effect via animation on floor for motion illusion
        const anim=document.createElement('a-animation');
        anim.setAttribute('attribute','position');
        anim.setAttribute('begin','start1');
        anim.setAttribute('to','350 0 0');
        anim.setAttribute('dur','100000');
        anim.setAttribute('easing','linear');
        anim.setAttribute('repeat','indefinite');

        tunnel.innerHTML='';
        tunnel.appendChild(floor);
        tunnel.appendChild(left);
        tunnel.appendChild(right);
        tunnel.appendChild(ceil);
        tunnel.appendChild(anim);
        if(!q('#tunnel')) scene.appendChild(tunnel);
      }

      /* ===== Block spawner: fall from sky, then rush toward player ===== */
      const colors = {1:'#ff0000',2:'#a041f4',3:'#f47c41',4:'#4158f4',5:'#0618a3'};
      function spawnBlock({level=1, lane=0, startDelay=0, fallHeight=30, fallDur=1500, rushStartX=200, rushDur=5000}){
        // lanes map to Z: -3,0,3
        const laneZ = [-3,0,3][lane];
        const scene=q('a-scene');
        const box=document.createElement('a-box');
        box.classList.add('obstacle');
        box.setAttribute('position', `${rushStartX} ${fallHeight} ${laneZ}`);
        box.setAttribute('scale','2 8 4');
        box.setAttribute('material', `color: ${colors[level]}; side: double; metalness:0; roughness:1`);
        // fall animation: to y=2
        const fall=document.createElement('a-animation');
        fall.setAttribute('attribute','position');
        fall.setAttribute('from', `${rushStartX} ${fallHeight} ${laneZ}`);
        fall.setAttribute('to',   `${rushStartX} 2 ${laneZ}`);
        fall.setAttribute('dur', String(fallDur));
        fall.setAttribute('delay', String(startDelay));
        fall.setAttribute('easing','easeOutCubic');
        // rush animation: move X from rushStartX to -50 past the player
        const rush=document.createElement('a-animation');
        rush.setAttribute('attribute','position');
        rush.setAttribute('from', `${rushStartX} 2 ${laneZ}`);
        rush.setAttribute('to',   `-50 2 ${laneZ}`);
        rush.setAttribute('dur', String(rushDur));
        rush.setAttribute('delay', String(startDelay + fallDur));
        rush.setAttribute('easing','linear');
        box.appendChild(fall); box.appendChild(rush);
        scene.appendChild(box);
        q('#player')?.components?.['runner-physics']?.refreshObstacles();
      }

      /* ===== Level scripts (derived cadence; matches your start gates) ===== */
      function scheduleLevel(level, baseDelay){
        // lanes sequence, staggered
        const patterns = [
          [1,0,2,1], // L1: center,left,right,center
          [0,2,1],   // L2
          [2,1,0,2], // L3
          [0,1,2],   // L4
        ];
        const lanes = patterns[level-1] || [1,0,2];
        lanes.forEach((lane,i)=>{
          timers.push(setTimeout(()=>spawnBlock({level, lane, startDelay:0}), baseDelay + i*1500));
        });
      }

      function scheduleLevel5(baseDelay){
        // Rotating diagonals (visual), plus rushers
        const scene=q('a-scene');
        const makeRotDiag=(laneZ, delay, from, to)=>{
          const e=document.createElement('a-box');
          e.classList.add('obstacle');
          e.setAttribute('position', `0 -500 ${laneZ}`);
          e.setAttribute('scale','3.25 8 3.25');
          e.setAttribute('rotation','0 0 65');
          e.setAttribute('material','color: #0618a3; side: double; metalness:0; roughness:1');
          const anim=document.createElement('a-animation');
          anim.setAttribute('attribute','position');
          anim.setAttribute('begin','start5');
          anim.setAttribute('delay', String(delay));
          anim.setAttribute('dur','10000');
          anim.setAttribute('easing','linear');
          anim.setAttribute('repeat','indefinite');
          anim.setAttribute('from', from);
          anim.setAttribute('to', to);
          e.appendChild(anim);
          scene.appendChild(e);
        };
        // match your cadence
        [12000,16000,23000,27000,33000,39000].forEach(d=>makeRotDiag(-3,d,'-500 250 -15','500 -248 12'));
        [11000,17000,22000,29000,35000,38000].forEach(d=>makeRotDiag( 3,d,'-500 250 15','500 -248 -12'));

        // add rushers mixed in
        [0,1,2,0,2,1].forEach((lane,i)=>{
          timers.push(setTimeout(()=>spawnBlock({level:5,lane}), baseDelay + i*1400));
        });
      }

      /* ===== Music progression and gates ===== */
      function wireMusic(){
        const target=q('#target'); if(!target) return;
        target.addEventListener('start1', ()=>{
          ['#song2','#song3','#song4','#song5','#song6'].forEach(pause);
          play('#song'); scoring=true;
        });
        target.addEventListener('start2', ()=>{
          play('#hah1'); ['#song','#song2','#song4','#song5','#song6'].forEach(pause); play('#song3');
          scheduleLevel(2, 0);
        });
        target.addEventListener('start3', ()=>{
          play('#hah2'); ['#song','#song2','#song3','#song5','#song6'].forEach(pause); play('#song4');
          scheduleLevel(3, 0);
        });
        target.addEventListener('start4', ()=>{
          play('#hah3'); ['#song','#song2','#song3','#song4','#song6'].forEach(pause); play('#song5');
          scheduleLevel(4, 0);
        });
        target.addEventListener('start5', ()=>{
          play('#hah1'); ['#song','#song2','#song3','#song4','#song5'].forEach(pause); play('#song6');
          boss=true; scheduleLevel5(0);
          setTimeout(()=>play('#hah1'),4500);
          setTimeout(()=>play('#hah2'),4500);
          setTimeout(()=>play('#hah3'),4500);
          // Boss rise: from below, forward, then hover
          const bossE=q('#boss');
          if(bossE){
            bossE.setAttribute('animation__rise','property: position; from: 0 -100 0; to: 30 0 0; dur: 2500; easing: easeOutCubic; startEvents: boss-rise');
            bossE.emit('boss-rise');
          }
        });
      }

      function startGates(){
        // L1 spawns and music already wired in start1
        scheduleLevel(1, 0);
        timers.push(setTimeout(()=>emit('start2',['#target']), 50000));
        timers.push(setTimeout(()=>emit('start3',['#target']),100000));
        timers.push(setTimeout(()=>emit('start4',['#target']),150000));
        timers.push(setTimeout(()=>emit('start5',['#target']),200000));
      }

      /* ===== Reset + Return to Lobby ===== */
      function hardReset(toLobby=false){
        clearTimers();
        clearObstacles();
        boss=false;
        scoring=false;
        gameStarted=false;
        // Reset HUD placement
        q('#startcc')?.setAttribute('position','-0.20 0.02 -1.05');
        // Score reset
        if (score>=50){ lastscore5=lastscore4; lastscore4=lastscore3; lastscore3=lastscore2; lastscore2=lastscore; lastscore=score; }
        setText('#lastscore', String(lastscore));
        setText('#lastscore2', String(lastscore2));
        setText('#lastscore3', String(lastscore3));
        setText('#lastscore4', String(lastscore4));
        setText('#lastscore5', String(lastscore5));
        score=0; setText('#scoreshow','0');
        // Stop all music, optionally resume intro
        ['#song','#song2','#song3','#song4','#song5','#song6','#hah1','#hah2','#hah3','#gameovers','#load'].forEach(pause);
        if (toLobby) play('#song2');
        // Rebuild tunnel to pristine
        buildTunnel();
        // Player position reset
        const p=q('#player'); if (p) { p.object3D.position.set(0,0.8,0); const phys=p.components['runner-physics']; if (phys){ phys.targetLane=1; phys.velY=0; } }
      }

      /* ===== Boot ===== */
      document.addEventListener('DOMContentLoaded', ()=>{
        buildTunnel();

        // Audio unlock
        bindClick('#enterArk', ()=>{
          try{ if (AFRAME.audioContext?.state==='suspended') AFRAME.audioContext.resume(); }catch(e){}
          play('#song2'); play('#click');
        });

        // Start game
        bindClick('#startcc', ()=>{
          play('#begin3');
          emit('start1',['#target','#tunnel','#floor','#left','#right']);
          wireMusic();
          startGates();
          scoring=true; gameStarted=true;
          // countdown
          const tb=q('#threeb'), tw=q('#twob'), ob=q('#oneb');
          tb.setAttribute('position','0 1 -1.62'); setTimeout(()=>tb.setAttribute('position','0 -100 0'),1000);
          setTimeout(()=>{ tw.setAttribute('position','0 1 -1.62'); setTimeout(()=>tw.setAttribute('position','0 -100 0'),1000); },1000);
          setTimeout(()=>{ ob.setAttribute('position','0 1 -1.62'); setTimeout(()=>ob.setAttribute('position','0 -100 0'),1000); },2000);
        });

        // Lane buttons
        bindClick('#leftT', ()=>{ const p=q('#player'); const phys=p?.components?.['runner-physics']; if(phys) phys.targetLane=0; });
        bindClick('#centerT', ()=>{ const p=q('#player'); const phys=p?.components?.['runner-physics']; if(phys) phys.targetLane=1; });
        bindClick('#rightT', ()=>{ const p=q('#player'); const phys=p?.components?.['runner-physics']; if(phys) phys.targetLane=2; });

        // Jump
        bindClick('#jumpb', ()=>{ const p=q('#player'); p?.components?.['runner-physics']?.jump(); });

        // Mute toggle
        bindClick('#songT', ()=>{
          const ids=['#song','#song2','#song3','#song4','#song5','#song6','#begin3','#gameovers','#lazer','#click','#click2','#hah1','#hah2','#hah3'];
          const muted = (q('#song').components?.sound?.data?.volume===0);
          ids.forEach(sel=>{
            const el=q(sel); if(!el?.components?.sound) return;
            const data=el.components.sound.data;
            el.setAttribute('sound', `src: ${data.src}; loop: ${data.loop}; autoplay: ${data.autoplay}; volume: ${muted ? (data.volume||0.3) : 0}`);
          });
        });

        // Lobby / Return to Lobby: full reset + intro music
        bindClick('#lobbybtn', ()=>{ play('#click2'); hardReset(true); });
        bindClick('#joinsm',   ()=>{ play('#click2'); });
        bindClick('#joinh',    ()=>{ play('#click2'); });

        // Reset button (game over)
        bindClick('#resetb', ()=>{ hardReset(false); });

        // Scoring tick
        setInterval(()=>{ if (scoring){ score+=10; setText('#scoreshow', String(score)); } },2000);

        // Boss laugh loop
        setInterval(()=>{ if(boss) play('#hah1'); },25000);

        // Obstacles list hook
        q('#player')?.components?.['runner-physics']?.refreshObstacles();
      });
    </script>
  </head>

  <body>
    <a-scene renderer="colorManagement: true; physicallyCorrectLights: true" background="color: #000">
      <a-assets>
        <img id="leftp" src="left.jpg">
        <img id="centerp" src="center.jpg">
        <img id="rightp" src="right.jpg">
        <img id="jumpp" src="jump.jpg">
        <img id="mutep" src="mute.jpg">
        <img id="arkwall" src="arkwall.jpg">
        <img id="credit" src="credit.jpg">
        <img id="startp" src="start.jpg">
        <img id="resetp" src="reset.jpg">
        <img id="joinp" src="join.jpg">
        <img id="lobbyp" src="lobby.jpg">
        <img id="scorep" src="score.jpg">
        <img id="scoreboardp" src="scoreboard.jpg">
        <img id="joinsmallp" src="joinsmall.jpg">
        <img id="lobbysmallp" src="lobbysmall.jpg">
        <img id="p1" src="1.jpg">
        <img id="p2" src="2.jpg">
        <img id="p3" src="3.jpg">
        <a-asset-item id="run-obj" src="run.obj"></a-asset-item>
      </a-assets>

      <!-- Player -->
      <a-entity id="player" position="0 0.8 0" runner-physics>
        <a-entity camera look-controls wasd-controls cursor-whitelist>
          <a-entity id="HUD" hud-anchor>
            <!-- Intro unlock (text only) -->
            <a-plane id="enterArk" width="0.7" height="0.2" position="-0.95 0.02 -1.05" material="color:#2c3e50; side: double" class="ui"></a-plane>
            <a-entity position="-0.95 0.02 -1.04" text="value: Enter Ark; color:#fff; align:center; width:3"></a-entity>
            <!-- Start -->
            <a-plane id="startcc" src="#startp" width="0.7" height="0.22" position="-0.20 0.02 -1.05" material="side: double" class="ui"></a-plane>
            <!-- Mute -->
            <a-plane id="songT" src="#mutep" width="0.35" height="0.2" position="0.55 0.02 -1.05" material="side: double" class="ui"></a-plane>
            <!-- Score card + text -->
            <a-plane id="scoreshow3" src="#scorep" width="0.65" height="0.22" position="0.95 0.02 -1.05" material="side: double" class="ui"></a-plane>
            <a-entity id="scoreshow" position="1.05 0.02 -1.04" text="value: 0; color: #6FF3E8; align: left; width: 6"></a-entity>
            <!-- Lane buttons -->
            <a-plane id="leftT" src="#leftp" width="0.25" height="0.18" position="-1.05 -0.22 -1.05" material="side: double" class="ui"></a-plane>
            <a-plane id="centerT" src="#centerp" width="0.25" height="0.18" position="-0.75 -0.22 -1.05" material="side: double" class="ui"></a-plane>
            <a-plane id="rightT" src="#rightp" width="0.25" height="0.18" position="-0.45 -0.22 -1.05" material="side: double" class="ui"></a-plane>
            <!-- Jump -->
            <a-plane id="jumpb" src="#jumpp" width="0.35" height="0.2" position="0.20 -0.22 -1.05" material="side: double" class="ui"></a-plane>
            <!-- Lobby / Join -->
            <a-plane id="lobbybtn" src="#lobbyp" width="0.55" height="0.18" position="0.55 -0.22 -1.05" material="side: double" class="ui"></a-plane>
            <a-plane id="joinsm" src="#joinsmallp" width="0.24" height="0.18" position="0.95 -0.22 -1.05" material="side: double" class="ui"></a-plane>
            <a-plane id="joinh" src="#joinp" width="0.7" height="0.2" position="0.8 0.12 -1.05" material="side: double" class="ui"></a-plane>
          </a-entity>
        </a-entity>
      </a-entity>

      <!-- Lighting -->
      <a-light type="directional" intensity="1.6" position="150 25 15"></a-light>

      <!-- Ground and side planes (visible both sides) -->
      <a-plane id="floor" position="0 0 0" rotation="-90 0 0" width="1500" height="10" material="color:#5ed4ff; side: double"></a-plane>
      <a-plane id="left"  position="0 22 -13" rotation="-20 0 0" width="1500" height="50" material="color:#5ed4ff; side: double"></a-plane>
      <a-plane id="right" position="0 22 13" rotation="-160 0 0" width="1500" height="50" material="color:#5ed4ff; side: double"></a-plane>

      <!-- Rebuilt tunnel -->
      <a-entity id="tunnel"></a-entity>

      <!-- Countdown -->
      <a-plane id="threeb" src="#p3" position="0 -100 -1.62" width="1" height="1" material="side: double"></a-plane>
      <a-plane id="twob"   src="#p2" position="0 -100 -1.62" width="1" height="1" material="side: double"></a-plane>
      <a-plane id="oneb"   src="#p1" position="0 -100 -1.62" width="1" height="1" material="side: double"></a-plane>

      <!-- Scoreboard -->
      <a-entity id="cube1" position="10 0 0">
        <a-plane width="6" height="4.5" position="0 13 -4.9" material="src:#arkwall; side: double"></a-plane>
        <a-plane width="1.25" height="2" position="0 12 4.9" rotation="0 180 0" material="src:#credit; side: double"></a-plane>
        <a-plane width="8" height="8" position="-14.9 15.5 0" rotation="0 90 0" material="src:#scoreboardp; side: double"></a-plane>
        <a-entity id="lastscore"  position="-14.8 16.75 0" rotation="0 90 0" text="value:0; color:#6FF3E8; width:6"></a-entity>
        <a-entity id="lastscore2" position="-14.8 15.75 0" rotation="0 90 0" text="value:0; color:#6FF3E8; width:6"></a-entity>
        <a-entity id="lastscore3" position="-14.8 14.75 0" rotation="0 90 0" text="value:0; color:#6FF3E8; width:6"></a-entity>
        <a-entity id="lastscore4" position="-14.8 13.75 0" rotation="0 90 0" text="value:0; color:#6FF3E8; width:6"></a-entity>
        <a-entity id="lastscore5" position="-14.8 12.75 0" rotation="0 90 0" text="value:0; color:#6FF3E8; width:6"></a-entity>
      </a-entity>

      <!-- Sounds -->
      <a-entity id="song"   sound="src:url(arktheme.wav);   loop:true; autoplay:false; volume:0.2"></a-entity>
      <a-entity id="song2"  sound="src:url(arkpregame.wav); loop:true; autoplay:false; volume:0.2"></a-entity>
      <a-entity id="song3"  sound="src:url(arktheme2.wav);  loop:true; autoplay:false; volume:0.2"></a-entity>
      <a-entity id="song4"  sound="src:url(arktheme3.wav);  loop:true; autoplay:false; volume:0.2"></a-entity>
      <a-entity id="song5"  sound="src:url(arktheme4.wav);  loop:true; autoplay:false; volume:0.2"></a-entity>
      <a-entity id="song6"  sound="src:url(level5.wav);     loop:true; autoplay:false; volume:0.3"></a-entity>

      <a-entity id="hah1" sound="src:url(ha1.wav); loop:false; autoplay:false; volume:0.3"></a-entity>
      <a-entity id="hah2" sound="src:url(ha2.wav); loop:false; autoplay:false; volume:0.3"></a-entity>
      <a-entity id="hah3" sound="src:url(ha3.wav); loop:false; autoplay:false; volume:0.3"></a-entity>
      <a-entity id="begin3" sound="src:url(begin.wav); loop:false; autoplay:false; volume:0.3"></a-entity>
      <a-entity id="gameovers" sound="src:url(gameover.wav); loop:false; autoplay:false; volume:1"></a-entity>
      <a-entity id="click"  sound="src:url(click.wav);  loop:false; autoplay:false; volume:0.3"></a-entity>
      <a-entity id="click2" sound="src:url(click.wav);  loop:false; autoplay:false; volume:0.3"></a-entity>
      <a-entity id="lazer"  sound="src:url(lazer.wav);  loop:false; autoplay:false; volume:0.3"></a-entity>

      <!-- Boss (rise animation recreated) -->
      <a-entity id="boss" position="0 -100 0" rotation="0 90 0" scale="50 50 50" obj-model="obj: #run-obj" material="color:#cccccc; side: double"></a-entity>

      <!-- Target for gate events -->
      <a-entity id="target"></a-entity>

      <!-- Reset button -->
      <a-plane id="resetb" src="#resetp" width="0.7" height="0.2" position="13 -2 0" rotation="0 -90 0" material="side: double" class="ui"></a-plane>

      <!-- Sky -->
      <a-sky color="black" radius="1050"></a-sky>
    </a-scene>
  </body>
</html>
